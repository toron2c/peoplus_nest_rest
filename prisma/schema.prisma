generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  extensions = [pgcrypto]
}

model User {
  id       String @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email    String @unique
  password String

  profile   Profile?
  profileId Int?
}

model Profile {
  id       Int       @id @default(autoincrement())
  bio      String    @default("")
  name     String    @default("anonymous")
  birthday DateTime?

  userId String @unique @db.Uuid

  user User @relation(fields: [userId], references: [id])

  posts    Post[]
  comments Comment[]
  tables   Table[]
}

model Post {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  text      String
  likes     Int      @default(0)

  authorId Int

  author Profile @relation(fields: [authorId], references: [id])

  comments Comment[]
}

model Comment {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  text      String
  likes     Int      @default(0)

  postId   Int
  authorId Int

  Post   Post    @relation(fields: [postId], references: [id])
  author Profile @relation(fields: [authorId], references: [id])
}

model Table {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  private   Boolean
  title     String
  text      String

  authorId Int     @unique
  author   Profile @relation(fields: [authorId], references: [id])

  stylesId Int   @unique
  styles   style @relation(fields: [stylesId], references: [id])
}

model style {
  id     Int    @id @default(autoincrement())
  styles String
  table  Table?
}

// model Table {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
//   User      User?    @relation(fields: [userId], references: [id])
//   userId    Int
//   title Title
// }

// model Style {
//   id      Int    @id @default(autoincrement())
//   styles  String
//   tableId Int    @unique
//   table   Table  @relation(fields: [tableId], references: [id])
// }
